 <!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments/layout :: head(text='Home')"></head>
    
    <body>
        <div class="box"> 
        <header th:replace="fragments/layout :: header"></header>
        
         <div th:if="${user.profilePhoto == null}">
            <span>No Profile Photo</span>
        </div>
         <div th:if="${user.profilePhoto != null}"> 
            <img th:src="@{/photos/{id}/content (id=${user.profilePhoto.id})}"/>  
        </div> 
        
        <p th:text="${user.name}" >My name</p>
        
        <div th:if="${isLogged}"><h1>My Friends:</h1></div> 
        <div th:if="${isLogged != true}"><h2 th:text="${user.name} + 'Â´s Friends:'"></h2></div> 
        
        <div th:if="${friends.empty}">
            <p>No Friends</p>
        </div> 
        <ul>
            <li th:each="friend: ${friends}"> 
                <a th:href="@{/users/{profile}(profile=${friend.profile})}" th:text="${friend.name}"></a> 
            </li>
        </ul>
        <div th:if="${isLogged}">
        <h1>Friend Requests:</h1>
        <div th:if="${friendRequests.empty}">
            <p>No Friend Requests</p>
        </div> 

        <ul>
            <li th:each="request: ${friendRequests}">  
                <a th:href="@{/users/{profile}(profile=${request.requester.profile})}" th:text="${request.requester.name}"></a>
                <span th:text="${request.date}"></span> 
                <form th:method="POST" th:action="@{/makingFriendsWith/{profile} (profile=${request.requester.profile})}"><input type="submit" value="ACCEPT"/></form>
                <form th:method="POST" th:action="@{/signUp}"><input type="submit" value="DECLINE"/></form> 
            </li>
        </ul> 
        </div>
         
         
        <h1> WALL -------------- MESSAGES: </h1>
        
        <ul>
            <li th:each="message: ${messages}">
                <span th:text="${message.sender.name}"></span>
                <span th:text="${message.date}"></span>
                
                <p th:text="${message.content}"></p>
                <ul>
                    <form th:method="POST" th:action="@{/commentsMessage/{id}/by/{profile}(id=${message.id}, profile=${user.profile})}" id="comment">
                    <!--<form th:method="POST" th:action="@{/{profile}/commentsOn/{message} (profile=${loggedUser.profile}, message=${message})}">-->    
                        <label for="comment">Comment:</label>
                        <input type="text" name="content" id="comment"/> 
                        <input type="submit" value="Send"/>
                    </form>
                    <li th:each="comment: ${message.comments}">
                        <p th:text="${comment.sender.name}"></p>
                        <p th:text="${comment.content}"></p>
                    </li>
                </ul>
            </li>
        </ul>
        
        <form  th:method="POST" th:action="@{/writeMessageTo/{profile}(profile=${user.profile})}" id="usrform">
                  <!--Name: <input type="text" name="usrname">--> 
<!--            <br/>-->
            <textarea rows="4" cols="50" name="content" form="usrform">
             </textarea>
             <input type="submit" value="Send"> </form>
        
         
        </div>
    </body>
</html>
